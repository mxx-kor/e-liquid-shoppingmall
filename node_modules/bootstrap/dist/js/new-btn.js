const minusBtn = document.getElementById('quantity-minus');
const plusBtn = document.getElementById('quantity-plus');
const quantity = document.getElementById('quantity-value');
const select = document.getElementById('selection');
const miniCart = document.getElementById('cart-mini');
const createdMiniCart = document.getElementById('cart-mini-element1');
const resultQuantity = document.getElementById('resultQuantity');
const resultCheck = document.getElementById('resultCheck');
const createdMiniCart2 = document.getElementById('cart-mini-element2');

let liquid = {
    detoxAloeVera:{
        product: {
            name: '9.8mg',
            price: 15000
        },
        coolingAgent: {
            name: '쿨링에이전트5.5ml (3,900원)',
            price: 3900
        }
    }
}


//수량 플러스, 마이너스 버튼
minusBtn.addEventListener('click', () => {
    if (quantity.value == 1) {
        alert("최소 주문 수량은 1개입니다.")
    }
    else {
        quantity.value --
    }
})

plusBtn.addEventListener('click', () => {
    if (quantity.value >= 10) {
        alert("개인 최대 구매수량은 10개입니다.")
        quantity.value = 10
    }
    else {
        quantity.value ++
    }
})

// 담기 버튼
miniCart.addEventListener('click', () => {
    let selectedItem = select.options[select.selectedIndex].text

    if (selectedItem == "선택하세요.") {
        alert("선택 먼저하세요")
    } else if (selectedItem == "쿨링에이전트5.5ml (3,900원)") {
        let howMany1 = quantity.value
        createdMiniCart2.innerHTML = `<small class="fw-bold">${selectedItem}</small>
        <small class="fw-bold" id="finalItem1">${howMany1}개</small>`;
        if (document.getElementById('finalItem2') == null) {
            resultQuantity.innerText = `(쿨링 ${howMany1}개)`;
            resultCheck.innerText = (howMany1 * 3900).toLocaleString('ko-KR')+'원';
        }else {
            resultQuantity.innerText = `${document.getElementById("finalItem2").innerText} (쿨링 ${howMany1}개)`;
            resultCheck.innerText = ((howMany1 * 3900) + (document.getElementById("finalItem2").innerText.slice(0, -1) * 15000)).toLocaleString('ko-KR')+'원';
        }
    }
    else {
        const howMany2 = quantity.value
        createdMiniCart.innerHTML = `<small class="fw-bold">${selectedItem}</small>
        <small class="fw-bold" id="finalItem2">${howMany2}개</small>`;
        if (document.getElementById('finalItem1') == null) {
            resultQuantity.innerText = howMany2+"개";
            resultCheck.innerText = (howMany2 * 15000).toLocaleString('ko-KR')+'원';
        } else {
            resultQuantity.innerText = `${howMany2}개 (쿨링 ${document.getElementById("finalItem1").innerText})`;
            resultCheck.innerText = ((document.getElementById("finalItem1").innerText.slice(0, -1) * 3900) + (howMany2 * 15000)).toLocaleString('ko-KR')+'원';
        }
    }
})

// if (createdMiniCart.innerHTML == "" && select.options[select.selectedIndex].text == "쿨링에이전트5.5ml (3,900원)" ) {
//     alert("추가상품만 주문은 불가합니다.")
// }
// 로컬 스토리지 사용하자